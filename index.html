<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeStream - Direktori Anime Legal Indonesia</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ... (Keeping your existing CSS) ... */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: #0f0f0f; color: #fff; line-height: 1.6; }
        header { background: rgba(0, 0, 0, 0.95); padding: 1rem 2rem; position: sticky; top: 0; z-index: 100; border-bottom: 2px solid #e50914; }
        .nav-container { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 700; color: #e50914; }
        nav a { color: #fff; text-decoration: none; margin-left: 2rem; font-weight: 500; transition: color 0.3s; }
        nav a:hover { color: #e50914; }
        .banner { position: relative; height: 400px; background: linear-gradient(to bottom, transparent, #0f0f0f), url('https://images.unsplash.com/photo-1578632767115-351597cf2477?w=1600&h=500&fit=crop') center/cover; display: flex; align-items: center; }
        .banner-content { max-width: 1400px; margin: 0 auto; padding: 0 2rem; width: 100%; }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        .search-box { width: 100%; max-width: 500px; padding: 0.8rem; background: #2a2a2a; border: 2px solid #3a3a3a; border-radius: 5px; color: #fff; margin-bottom: 2rem; }
        .genre-filter, .season-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .genre-btn, .tab-btn { padding: 0.5rem 1rem; background: #2a2a2a; border: 1px solid #3a3a3a; color: #fff; border-radius: 20px; cursor: pointer; transition: 0.3s; }
        .genre-btn.active, .tab-btn.active { background: #e50914; border-color: #e50914; }
        .anime-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1.5rem; }
        .anime-card { background: #1a1a1a; border-radius: 10px; overflow: hidden; cursor: pointer; transition: 0.3s; }
        .anime-card:hover { transform: translateY(-10px); }
        .anime-poster { width: 100%; height: 280px; object-fit: cover; }
        .anime-info { padding: 1rem; }
        .video-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center; padding: 20px; overflow-y: auto;}
        .video-modal.active { display: flex; }
        .video-wrapper { width: 100%; max-width: 900px; background: #1a1a1a; border-radius: 10px; overflow: hidden; }
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; background: #000; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .external-btn { display: block; width: fit-content; margin: 50px auto; padding: 15px 30px; background: #00aeef; color: white; border-radius: 5px; text-decoration: none; font-weight: bold; }
        .close-btn { float: right; padding: 10px; cursor: pointer; font-size: 20px; color: white; background: none; border: none; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>

<header>
    <div class="nav-container">
        <div class="logo">AnimeStream</div>
        <nav><a href="#">Home</a><a href="#">Trending</a><a href="#">Jadwal</a></nav>
    </div>
</header>

<div class="banner">
    <div class="banner-content">
        <h1>Nonton Anime Legal</h1>
        <p>Agregator resmi dari Muse Indonesia, Ani-One, dan Bstation.</p>
    </div>
</div>

<div class="container">
    <input type="text" class="search-box" id="searchBox" placeholder="üîç Cari anime..." onkeyup="handleSearch()">

    <div class="genre-filter" id="genreFilter">
        <button class="genre-btn active" onclick="filterByGenre('all')">Semua</button>
        <button class="genre-btn" onclick="filterByGenre('action')">Action</button>
        <button class="genre-btn" onclick="filterByGenre('fantasy')">Fantasy</button>
        <button class="genre-btn" onclick="filterByGenre('romance')">Romance</button>
    </div>

    <div class="season-tabs">
        <button class="tab-btn active" onclick="switchTab('winter2024')">Winter 2024</button>
        <button class="tab-btn" onclick="switchTab('popular')">Popular</button>
    </div>

    <div id="winter2024" class="tab-content active">
        <div class="anime-grid" id="grid-winter2024"></div>
    </div>
    <div id="popular" class="tab-content">
        <div class="anime-grid" id="grid-popular"></div>
    </div>
</div>

<div class="video-modal" id="videoModal">
    <div class="video-wrapper">
        <button class="close-btn" onclick="closeVideo()">‚úï Close</button>
        <div id="playerArea"></div>
        <div style="padding: 20px;">
            <h3 id="modalTitle"></h3>
            <p id="modalMeta" style="color: #888; font-size: 0.9rem;"></p>
        </div>
    </div>
</div>

<script>
    const animeDatabase = {
        winter2024: [
            {title: 'Frieren: Beyond Journey\'s End', rating: 9.3, eps: 28, genre: 'fantasy', img: 'https://images.unsplash.com/photo-1614728263952-84ea206f2c40?w=400', type: 'youtube', videoId: 'fzQ6gRAEoy0'},
            {title: 'Solo Leveling', rating: 8.9, eps: 12, genre: 'action', img: 'https://images.unsplash.com/photo-1578632767115-351597cf2477?w=400', type: 'external', url: 'https://www.bilibili.tv/id/play/2097863'},
            {title: 'A Sign of Affection', rating: 8.3, eps: 12, genre: 'romance', img: 'https://images.unsplash.com/photo-1618336753974-aae8e04506aa?w=400', type: 'youtube', videoId: 'e8YBesRKq_U'}
        ],
        popular: [
            {title: 'One Piece', rating: 9.1, eps: 1100, genre: 'action', img: 'https://images.unsplash.com/photo-1613376023733-0a73315d9b06?w=400', type: 'external', url: 'https://www.iq.com/album/one-piece-1999-1976z6p06p'}
        ]
    };

    let currentGenre = 'all';

    function renderGrids() {
        for (const season in animeDatabase) {
            const grid = document.getElementById(`grid-${season}`);
            if (!grid) continue;
            
            grid.innerHTML = animeDatabase[season]
                .filter(anime => currentGenre === 'all' || anime.genre === currentGenre)
                .map(anime => `
                    <div class="anime-card" onclick="openVideo('${season}', '${anime.title}')">
                        <img src="${anime.img}" class="anime-poster">
                        <div class="anime-info">
                            <div class="anime-title">${anime.title}</div>
                            <div style="font-size: 0.8rem; color: #aaa;">‚≠ê ${anime.rating} | ${anime.eps} Eps</div>
                        </div>
                    </div>
                `).join('');
        }
    }

    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function filterByGenre(genre) {
        currentGenre = genre;
        document.querySelectorAll('.genre-btn').forEach(b => b.classList.remove('active'));
        event.currentTarget.classList.add('active');
        renderGrids();
    }

    function openVideo(season, title) {
        const anime = animeDatabase[season].find(a => a.title === title);
        const modal = document.getElementById('videoModal');
        const playerArea = document.getElementById('playerArea');
        
        document.getElementById('modalTitle').innerText = anime.title;
        document.getElementById('modalMeta').innerText = `${anime.genre.toUpperCase()} ‚Ä¢ Rating: ${anime.rating}`;

        if (anime.type === 'youtube') {
            playerArea.innerHTML = `
                <div class="video-container">
                    <iframe src="https://www.youtube.com/embed/${anime.videoId}" allowfullscreen></iframe>
                </div>`;
        } else {
            playerArea.innerHTML = `
                <div class="video-container" style="display:flex; align-items:center; justify-content:center; background:#222;">
                    <div style="text-align:center">
                        <p>Streaming tersedia di platform eksternal</p>
                        <a href="${anime.url}" target="_blank" class="external-btn">Tonton di Bstation / iQIYI</a>
                    </div>
                </div>`;
        }
        
        modal.classList.add('active');
        document.body.style.overflow = 'hidden'; // Stop scroll
    }

    function closeVideo() {
        const modal = document.getElementById('videoModal');
        document.getElementById('playerArea').innerHTML = '';
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    function handleSearch() {
        const query = document.getElementById('searchBox').value.toLowerCase();
        document.querySelectorAll('.anime-card').forEach(card => {
            const title = card.querySelector('.anime-title').innerText.toLowerCase();
            card.style.display = title.includes(query) ? 'block' : 'none';
        });
    }

    // Initial load
    renderGrids();
</script>
</body>
</html>
